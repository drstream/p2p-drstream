!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jwplayer_hls_provider=e()}}(function(){return function s(o,a,l){function u(t,e){if(!a[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[t]={exports:{}};o[t][0].call(r.exports,function(e){return u(o[t][1][e]||e)},r,r.exports,s,o,a,l)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,h="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,r),o=h?h+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(h=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(h?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=h?h+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,s=new Array(r);i<r;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=h?h+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,r,s){var o=h?h+e:e;if(!this._events[o])return!1;var a,l,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,r),!0;case 6:return u.fn.call(u.context,t,n,i,r,s),!0}for(l=1,a=new Array(c-1);l<c;l++)a[l-1]=arguments[l];u.fn.apply(u.context,a)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!a)for(d=1,a=new Array(c-1);d<c;d++)a[d-1]=arguments[d];u[l].fn.apply(u[l].context,a)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,n,i){var r=h?h+e:e;if(!this._events[r])return this;if(!t)return u(this,r),this;var s=this._events[r];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||u(this,r);else{for(var o=0,a=[],l=s.length;o<l;o++)(s[o].fn!==t||i&&!s[o].once||n&&s[o].context!==n)&&a.push(s[o]);a.length?this._events[r]=1===a.length?a[0]:a:u(this,r)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=h?h+e:e,this._events[t]&&u(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=h,o.EventEmitter=o,void 0!==t&&(t.exports=o)},{}],2:[function(e,t,n){"use strict";var Y=e("eventemitter3"),C=t.exports=function(e){var t=C.jwplayer||window.jwplayer,s=C.Hls||window.Hls,n=e&&t(e);console.log("init hola/hls provider v"+C.VERSION+" hls v"+s.version+(C.version?" hap v"+C.version:""));var o=n.provider=this;function i(t){function n(e){t.removeEventListener("playing",n),t.removeEventListener("pause",n),t.removeEventListener("abort",n),t.removeEventListener("error",n),"playing"!=e.type&&l('play() was interrupted by a "'+e.type+'" event')}t.paused?l("video play refused"):(t.addEventListener("playing",n),t.addEventListener("abort",n),t.addEventListener("error",n),t.addEventListener("pause",n))}function a(){var e=v.play()||i(v);e&&e.catch?e.catch(function(e){l("video_play failed with "+e),console.warn(e),"NotAllowedError"==e.name&&v.hasAttribute("jw-gesture-required")&&(o.trigger("autoplayFailed"),v.setAttribute("autoplay-failed","failed"))}):v.hasAttribute("jw-gesture-required")&&(o.trigger("autoplayFailed"),v.setAttribute("autoplay-failed","failed"))}function l(e){var t;(t=y.debug)&&t.log(e)}function u(){l("hls_play state: "+o.hls_state+" att:"+o.attached),!(o.hls_queued.play="ready"!=o.hls_state)&&o.attached&&(o.hls_restore_pos(),a())}this.hls_restore_pos=function(){var e=this.hls_queued.seek,t=v.currentTime;"STOPPED"==c.streamController.state&&(c.streamController.startPosition=0,c.startLoad(e||0)),e&&(this._in_seek=!0,v.currentTime=e,this.trigger(W.JWPLAYER_MEDIA_SEEK,{position:t,offset:e}),v.readyState||v.dispatchEvent(new Event("seeking")),this.hls_queued.seek=0)},this.events=new Y,this.addEventListener=this.on=this.events.on.bind(this.events),this.once=this.events.once.bind(this.events),this.removeEventListener=this.off=this.events.off.bind(this.events),this.trigger=this.emit=function(e){if(o.attached||o.before_complete){var t=[].slice.call(arguments);o.events.emit.apply(this.events,t),"all"!=e&&(t.unshift("all"),o.events.emit.apply(this.events,t))}},this.removeAllListeners=function(e){this.events.removeAllListeners(e)},this.hls_queued={play:!1,seek:0},this.attached=!0,this.hls_state="idle",this.is_mobile=function(){var e,t,n=navigator.userAgent;if((e=/iP(hone|ad|od)/i.test(n))||(t=/Android/i.test(n)))return{is_ios:e,is_android:t}},this.supports_captions=function(){var e=navigator.userAgent;return/(iPhone|iPad|iPod|iPod touch);.*?OS/.test(e)||/ (Chrome|Version)\/\d+(\.\d+)+.* Safari\/\d+(\.\d+)+/.test(e)||/Firefox\/(\d+(?:\.\d+)+)/.test(e)};var r,c,d,f,h=document.getElementById(e),v=h?h.querySelector("video"):void 0,_=this.is_mobile(),p={reason:"initial choice",mode:"auto"};v||(v=document.createElement("video"),_&&v.setAttribute("jw-gesture-required",""));v.className="jw-video jw-reset",v.hola_dm_hls_attached=!0,function(n,t){for(var e=n;e&&!e.hasOwnProperty("src");e=Object.getPrototypeOf(e));if(e){var i=Object.getOwnPropertyDescriptor(e,"src");i.get||i.set||(i.get=function(){var e=n.getAttribute("src");return null!=e?e:""},i.set=function(e){var t=document.createElement("source");t.src=e||"",n.setAttribute("src",t.src)}),Object.defineProperty(n,"src",{configurable:!0,enumerable:!1,set:function(e){t(i.get.call(n),e)&&i.set.call(n,e)},get:i.get})}}(v,function(e,t){return t!=e+"?"});var E,g,A,m,y=C.hls_params||{};this.ad_count=0,n&&(n.on("captionsList",L),n.on("captionsChanged",L),n.on("adImpression",function(){o.ad_count++}),n.on("adComplete",function(){o.ad_count--}),n.on("adSkipped",function(){o.ad_count--}),Object.assign(y,n.hola_config),"undefined"!=y.debug&&(E=y.debug,delete y.debug));y.debug={},["debug","info","log","warn","error"].forEach(function(e){y.debug[e]=function(e,t){o.hls.holaLog&&o.hls.holaLog[e]&&o.hls.holaLog[e].call(o.hls.holaLog,t)}.bind(null,e)}),this.hls=c=new s(y),c.holaLog=E,n&&(n.hls=c);function L(e){if(o.renderNatively)for(var t=v.textTracks,n=e.tracks[e.track].id,i=0;i<t.length;i++)t[i].mode=t[i]._id==n?"showing":"hidden"}function b(){var e,t,n=v.seekable?v.seekable.length:0;for(e=t=0;e<n;e++)t=Math.max(t,v.seekable.end(e));return t}function w(){var e=v.duration,t=b();if(e==1/0&&t){var n=t-v.seekable.start(0);n!=1/0&&120<n&&(e=-n)}return e}function R(){return function(){var e,t;try{if(!(t=c.streamController.levels))return;var n=t.find(function(e){return e.details});e=n&&!!n.details.live}catch(e){l("is_live failed with "+e)}return e}()?1/0:w()}function M(){var e=v.buffered,t=v.duration;return!e||!e.length||t<=0||t==1/0?0:Math.min(e.end(e.length-1)/t,1)}function P(e,t,n){e==g&&n==A||(g=e,o.trigger(W.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:R()}))}function D(){o.setState("complete"),o.trigger(W.JWPLAYER_MEDIA_COMPLETE),o.before_complete=!1}var T={durationchange:function(){A=w(),P(M(),m,A)},ended:function(){"idle"!=o.state&&"complete"!=o.state&&(o.before_complete=!0,o.trigger(W.JWPLAYER_MEDIA_BEFORECOMPLETE),o.attached&&D())},error:function(){o.trigger(W.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"})},loadstart:function(){v.setAttribute("jw-loaded","started")},loadeddata:function(){v.setAttribute("jw-loaded","data"),o.supports_captions()&&(v.textTracks.onaddtrack=function(){o.renderNatively=!0,o.trigger("subtitlesTracks",{tracks:v.textTracks})},v.textTracks.length&&v.textTracks.onaddtrack(),o.trigger(W.JWPLAYER_MEDIA_TYPE,{mediaType:v.videoHeight?"video":"audio"}))},loadedmetadata:function(){v.muted&&(v.muted=!1,v.muted=!0),v.setAttribute("jw-loaded","meta"),A=w(),o.trigger(W.JWPLAYER_MEDIA_META,{duration:R(),height:v.videoHeight,width:v.videoWidth})},canplay:function(){f=!0,o.trigger(W.JWPLAYER_MEDIA_BUFFER_FULL)},playing:function(){o.setState("playing"),v.hasAttribute("jw-played")||v.setAttribute("jw-played",""),v.hasAttribute("jw-gesture-required")&&(v.removeAttribute("jw-gesture-required"),v.removeAttribute("autoplay-failed")),o.trigger(W.JWPLAYER_PROVIDER_FIRST_FRAME,{})},pause:function(){"complete"!=o.state&&v.currentTime!=v.duration&&o.setState("paused")},seeking:function(){o._in_seek||(o._in_seek=!0,o.trigger(W.JWPLAYER_MEDIA_SEEK,{position:m,offset:v.currentTime}))},seeked:function(){o._in_seek=!1,o.trigger(W.JWPLAYER_MEDIA_SEEKED)},progress:function(){P(M(),m,A)},timeupdate:function(){A=w(),m=A<0?-(b()-v.currentTime):v.currentTime,P(M(),m,A),"playing"==o.state&&o.trigger(W.JWPLAYER_MEDIA_TIME,{position:m,duration:R()})}};function I(e){return function(){o.attached&&T[e]()}}for(var O in T)v.addEventListener(O,I(O),!1);function k(e){return e.height?e.height+"p":e.width?Math.round(9*e.width/16)+"p":e.bitrate?function(e){if(void 0===e)return"";if(!e)return"0";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/=Math.pow(1024,t))<.001?"0":(1023<=e&&(e=Math.trunc(e)),e.toFixed(e<1?3:e<10?2:e<100?1:0).replace(/\.0*$/,"")+["","K","M","G","T","P"][t])}(e.bitrate)+"bps":0}function j(){var e=c.levels||[],t=[];return 1<e.length&&t.push({label:"Auto"}),e.forEach(function(e){t.push({bitrate:e.bitrate,height:e.height,label:k(e),width:e.width})}),t}function S(e){var t=c.levels||[];return e=e||c.currentLevel,{jw:-1==c.manual_level||t.length<2?0:e+1,real:t.length<2?0:e+1}}c.on(s.Events.ERROR,function(e,t){if(t.fatal){var n;switch(t.details){case s.ErrorDetails.MANIFEST_LOAD_ERROR:case s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:n="Cannot load M3U8: "+t.response.statusText;break;default:n="Error loading media: "+t.details}o.trigger(W.JWPLAYER_MEDIA_ERROR,{message:n})}}),c.on(s.Events.MANIFEST_LOADED,function(){o.trigger(W.JWPLAYER_MEDIA_LEVELS,{currentQuality:S().jw,levels:j()})}),c.on(s.Events.LEVEL_SWITCH,function(e,t){var n=j(),i=S(t.level);o.trigger(W.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:i.jw,levels:n});var r=n[i.real];p.level=r,p.level.index=i.real,p.level.label=-1==c.manual_level&&1<n.length?"auto":r.label,p.reason=p.reason||"auto",o.trigger("visualQuality",p),p.reason=""}),this.init=function(e){d=!1,v.setAttribute("jw-loaded","init")},this.load=function(e){if(this.attached){var t=function(e){return e&&e.find(function(e){return e.default})||e[0]}(e.sources).file,n=v.getAttribute("jw-loaded"),i=this.hls_queued,r=v.hasAttribute("jw-played");if(_&&!r||this.setState("loading"),i.seek=Math.max(e.starttime-(i.rw_sec||0),0),"ready"!=this.hls_state||(this.source||"")!=t||["init","started"].includes(n))d=!1,v.load(),c.stopLoad(c.media&&"ready"==this.hls_state&&"init"==n),function(e){e&&("ready"==o.hls_state&&(o.hls_state="idle"),o.level_cb&&c.off(s.Events.LEVEL_LOADED,o.level_cb),o.level_cb=function(){l("hls play queued on level_cb:"+o.hls_queued.play),c.off(s.Events.LEVEL_LOADED,o.level_cb),o.level_cb=void 0,o.hls_state="ready",o.hls_queued.play&&u(),o.trigger(W.JWPLAYER_MEDIA_BUFFER_FULL)},c.on(s.Events.LEVEL_LOADED,o.level_cb),c.loadSource(e),c.media||o.attachMedia())}(this.source=t),v.setAttribute("jw-loaded","init");else u();_&&!r&&(d||_.is_ios&&!f||(f=!(d=!0),a()),v.paused||"playing"==this.state||this.setState("loading"))}},this.play=function(){u()},this.pause=function(){v.pause(),o.setState("paused")},this.stop=function(){c.stopLoad(),o.setState("idle")},this.volume=function(e){v.volume=Math.min(e/100,1)},this.mute=function(e){v.muted=!!e},this.seek=function(e){if(this._in_seek=!0,"ready"==this.hls_state){var t=v.currentTime;v.currentTime=e,this.trigger(W.JWPLAYER_MEDIA_SEEK,{position:t,offset:e})}else this.hls_queued.seek=e},this.resize=function(e,t,n){},this.remove=function(){this.in_container=!1,c.stopLoad(),this.source=void 0,r===v.parentNode&&r.removeChild(v)},this.destroy=function(){for(var e in T)v.removeEventListener(e,T[e],!1);this.removeAllListeners()},this.setVisibility=function(e){r.style.visibility=e?"visible":"",r.style.opacity=e?1:0},this.setFullscreen=function(){return!1},this.getFullscreen=function(){},this.getContainer=function(){return r},this.setContainer=function(e){(r=e).appendChild(v),this.in_container=!0},c.manual_level=-1,this.setCurrentQuality=function(e){e!=c.manual_level+1&&(c.manual_level=e-1,c.hola_adaptive||(c.loadLevel=c.manual_level),o.trigger(W.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:j()}),p.reason="api")},this.getName=function(){return{name:"hola/hls"}},this.get_position=function(){return v.currentTime},this.getQualityLevels=function(){return j()},this.getCurrentQuality=function(){return S(c.loadLevel).jw},this.getAudioTracks=function(){},this.getCurrentAudioTrack=function(){},this.setCurrentAudioTrack=function(){},this.checkComplete=function(){return!!this.before_complete},this.setControls=function(){},this.attachMedia=function(){if(this.before_complete)return D();this.ad_count&&l("jwprovider attach inside ad "+this.ad_count),this.attached=!0,c.attachMedia(v)},this.detachMedia=function(){return c.trigger(s.Events.BUFFER_RESET),c.detachMedia(),this.level_cb&&(c.off(s.Events.LEVEL_LOADED,this.level_cb),this.level_cb=void 0),void 0!==c.bufferController&&delete c.bufferController.segments,this.attached=!1,v},this.setState=function(e){var t=this.state||"idle";(this.state=e)!=t&&this.trigger(W.JWPLAYER_PLAYER_STATE,{newstate:e})},this.sendMediaType=function(e){var t=["oga","aac","mp3","mpeg","vorbis"].includes(e[0].type);this.trigger(W.JWPLAYER_MEDIA_TYPE,{mediaType:t?"audio":"video"})}},i=!1,W={JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame"};function r(){for(var e,t=C.jwplayer||window.jwplayer,n=0,i=[];(e=t(n++))&&e.pause;)i.push(e);return i}C.getName=function(){return{name:"hola/hls"}},C.supports=function(n){var e=C.Hls||window.Hls;return!r().every(function(e){var t=e.getPlaylist();return(t.every?t:[{sources:[t]}]).every(function(e){return(e.allSources||e.sources||[{file:e.file}]).every(function(e){return e.file!=n.file})})})&&(!C.disabled&&function(e){return"hls"==e.type||(e.file||"").match(/\.m3u8$/)}(n)&&e&&e.isSupported())},C.attach=function(){var e=C.jwplayer||window.jwplayer;C.disabled=!1,i||(i=!0,e.api.registerProvider(this))},C.detach=function(e){C.disabled=!0,e&&e.attached&&(e.setState("idle"),e.detachMedia())},C.reload_jwplayer_instances=function(){r().forEach(function(e){var t=e.getConfig();if(t){if(t.advertising&&!t.advertising.client&&t.plugins)for(var n in t.plugins)if(t.plugins[n]===t.advertising){var i=n.match(/\/(\w+)\.js$/);t.advertising.client=i&&i[1];break}e.setup(t)}})},C.VERSION="0.0.79"},{eventemitter3:1}]},{},[2])(2)});
